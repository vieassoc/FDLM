"use strict";!function(a){a.module("analytics",["ng"]).service("analytics",["$rootScope","$window","$location",function(a,b,c){var d=function(){b._gaq.push(["_trackPageview",c.path()])};a.$on("$viewContentLoaded",d)}])}(window.angular);var App=angular.module("fdlmApp",["ngRoute","appControllers","appServices","appFilters","leaflet-directive","scrollto","analytics"]);App.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/home.html",controller:"NewsListCtrl"}).when("/programmation-ariege-n-zik-vendredi-13-juin-2014",{templateUrl:"partials/prog-vendredi.html",controller:"ProgrammationCtrl"}).when("/programmation-ariege-n-zik-samedi-14-juin-2014",{templateUrl:"partials/prog-samedi.html",controller:"ProgrammationCtrl"}).when("/archive-faites-de-la-musique-fdlm-2013",{templateUrl:"partials/archive.html"}).when("/association-faites-de-la-musique",{templateUrl:"partials/association.html",controller:"AssociationCtrl"}).when("/contact",{templateUrl:"partials/contact.html",controller:"ContactCtrl"}).when("/artiste/hassah",{templateUrl:"partials/artiste.html",controller:"ContactCtrl"}).otherwise({redirectTo:"/"})}]),App.config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self","http://www.youtube.com/embed/**","https://www.youtube-nocookie.com/**","https://w.soundcloud.com/**","https://api.soundcloud.com/**"])}]);var appControllers=angular.module("appControllers",["ngSanitize","leaflet-directive"]);appControllers.controller("MenuCtrl",["$scope","Menu","$route",function(a,b){a.menu=b.query(),a.isActive=function(a){var b=window.location.href,c=b.split("/");return c[c.length-2]===a&&""===c[c.length-1]||b.indexOf(a.replace("#",""))>0}}]),appControllers.controller("TemplateCtrl",["$scope","GeneralInformation",function(a,b){a.general_info=b.query()}]),appControllers.controller("NewsListCtrl",["$scope","News","Menu","Gallery",function(a,b,c,d){a.news=b.query(),a.menu=c.query(),a.gallery=d.query({idGallery:1}),a.getSrcYoutube=function(a){return"https://www.youtube-nocookie.com/embed/"+a}}]),appControllers.controller("AssociationCtrl",["$scope","Staff",function(a,b){a.staff=b.query()}]),appControllers.controller("ProgrammationCtrl",["$scope","$filter","Programmation",function(a,b,c){a.current_date=window.location.href.indexOf("vendredi")>0?"2014-06-13":"2014-06-14",console.log(a.current_date),a.programmations=c.query()}]),appControllers.controller("ContactCtrl",["$scope",function(a){angular.extend(a,{center:{lat:43.210995,lng:1.935181,zoom:9},markers:[{lat:43.110995,lng:1.935181,message:'<img src=\'img/logo1v1.png\' style="height:75px"/><br/><strong>Festival Ariege\'n ZIC</strong><br/><br/><img src=\'img/services.png\' style="height:30px"/><br/><br/>Salle des fêtes de Malegoude<br/>09500 Malegoude<br/><br/><a target="blank" href="https://maps.google.fr/maps?daddr=malegoude&hl=fr&ll=43.206177,2.109375&spn=0.912897,2.113495&sll=42.943856,1.50092&sspn=1.833603,4.22699&mra=ls&t=m&z=10">Itinéraire avec Google Map</a>',focus:!0,draggable:!1,icon:{type:"awesomeMarker",icon:"music",markerColor:"red"}},{lat:43.103054,lng:1.633945,message:"<strong>Pamiers</strong><br/>30 kms<br/>",focus:!1,draggable:!1},{lat:43.604957,lng:1.447346,message:"<strong>Toulouse</strong><br/>100 kms<br/>",focus:!1,draggable:!1},{lat:43.213306,lng:2.345991,message:"<strong>Carcasonne</strong><br/>45 kms<br/>",focus:!1,draggable:!1},{lat:42.721688,lng:1.83742,message:"<strong>Ax-Les-Thermes</strong>",focus:!1,draggable:!1}],defaults:{scrollWheelZoom:!1,fullscreenControl:!0,fullscreenControlOptions:{title:"Show me the fullscreen !"}},layers:{baselayers:{maptile:{name:"B/W",type:"xyz",subdomains:"1234",url:"http://{s}.maptile.lbs.ovi.com/maptiler/v2/maptile/newest/normal.day.grey/{z}/{x}/{y}/256/png8?token={devID}&app_id={ID}",layerParams:{devID:"xyz",ID:"abc",subdomains:"1234"}},osm:{name:"OpenStreetMap   ",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",type:"xyz"}}}})}]);var appServices=angular.module("appServices",["ngResource"]);appServices.factory("News",["$resource",function(a){return a("http://www.vieassociative.fr/api/0.1/association/5/news",{},{query:{method:"GET",isArray:!1}})}]),appServices.factory("Menu",["$resource",function(a){return a("vieassociative/menu.json",{},{query:{method:"GET",isArray:!0}})}]),appServices.factory("Gallery",["$resource",function(a){return a("vieassociative/gallery:idGallery.json",{},{query:{method:"GET",isArray:!0}})}]),appServices.factory("Staff",["$resource",function(a){return a("vieassociative/staff.json",{},{query:{method:"GET",isArray:!0}})}]),appServices.factory("Programmation",["$resource",function(a){return a("vieassociative/programmation.json",{},{query:{method:"GET",isArray:!0}})}]),appServices.factory("GeneralInformation",["$resource",function(a){return a("vieassociative/association1.json",{},{query:{method:"GET"}})}]);var appFilters=angular.module("appFilters",["ngResource"]);appFilters.filter("isConcerned",function(){return function(a,b){var c=[],d=new Date(b),e=new Date(d.getFullYear(),d.getMonth(),d.getDate(),12,0,0,0),f=new Date(e);f.setDate(e.getDate()+1);for(var g=0;g<a.length;g++){var h=new Date(a[g].date_start);h>=e&&f>=h&&c.push(a[g])}return c.sort(function(a,b){return a=new Date(a.date_start),b=new Date(b.date_start),a>b?1:b>a?-1:0}),c}});